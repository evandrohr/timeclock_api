(window.webpackJsonptimeclock_web=window.webpackJsonptimeclock_web||[]).push([[0],{164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),l=(a(96),a(43),a(84)),u=a(24),s=a(30),i=function(){return localStorage.getItem("@auth-token")},m=function(e){localStorage.setItem("@auth-token",e)},p=function(){localStorage.removeItem("@auth-token"),localStorage.removeItem("@user_id"),localStorage.removeItem("@user_name")},d=function(e){localStorage.setItem("@user_id",e)},h=function(){return localStorage.getItem("@user_id")},f=function(e){localStorage.setItem("@user_name",e)},v=a(8),E=a.n(v),b=a(13),g=a(15),k=a(16),y=a(18),w=a(17),j=a(19),O=a(85),S=a.n(O),_=a(86),C=a.n(_).a.create({baseURL:"http://18.222.159.99:80/api/v1/"});C.interceptors.request.use(function(){var e=Object(b.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=i())&&(t.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var x=C,I=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",confirm_password:"",error:""},a.handleSignUp=function(){var e=Object(b.a)(E.a.mark((function e(t){var n,r,c,o,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.username,c=n.email,o=n.password,l=n.confirm_password,r&&c&&o&&l){e.next=6;break}a.setState({error:"All fields are required!"}),e.next=16;break;case 6:return e.prev=6,e.next=9,x.post("/users",{username:r,email:c,password:o,confirm_password:l});case 9:a.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),a.setState({error:"Error registering your account"});case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSignUp},r.a.createElement("img",{src:S.a,alt:"Logo"}),this.state.error&&r.a.createElement("p",null,this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",onChange:function(t){return e.setState({username:t.target.value})}}),r.a.createElement("input",{type:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",onChange:function(t){return e.setState({confirm_password:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Sign Up"),r.a.createElement("hr",null),r.a.createElement(s.b,{to:"/"},"login")))}}]),t}(n.Component),N=Object(u.g)(I),A=a(36),B=a.n(A),T=a(31),D=a.n(T),P=a(26),z=a.n(P),L=a(50),U=a.n(L),H=a(35),Y=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U.a,null,r.a.createElement(U.a.Brand,null,r.a.createElement(H.a,{icon:"check-circle",size:"lg"})," Time Clock")),r.a.createElement("br",null))}}]),t}(n.Component),q=a(23),J=a(27);q.b.add(J.a,J.c);var M=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",error:""},a.handleSignIn=function(){var e=Object(b.a)(E.a.mark((function e(t){var n,r,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.email,c=n.password,r&&c){e.next=6;break}a.setState({error:"All fields required!"}),e.next=19;break;case 6:return e.prev=6,e.next=9,x.post("/authenticate",{email:r,password:c});case 9:o=e.sent,m(o.data.auth_token),d(o.data.user_id),f(o.data.user_name),a.props.history.push("/dashboard"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),a.setState({error:"Username or Password is incorrect!"});case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Y,null)),r.a.createElement(B.a,null,r.a.createElement("form",{onSubmit:this.handleSignIn},this.state.error&&r.a.createElement("p",null,this.state.error),r.a.createElement(D.a,null,r.a.createElement(z.a,null,r.a.createElement("input",{type:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})}}))),r.a.createElement(D.a,null,r.a.createElement(z.a,null,r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}))),r.a.createElement(D.a,null,r.a.createElement(z.a,null,r.a.createElement("button",{type:"submit"},"Submit"))),r.a.createElement("hr",null))))}}]),t}(n.Component),F=Object(u.g)(M),G=a(38),R=a(51),K=a.n(R),Q=a(90),V=a.n(Q),W=a(89),X=a.n(W),Z=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"deleteEvent",value:function(){var e=Object(b.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(i())})},!window.confirm('Are you sure you want to delete: "'.concat(t.event_time,'"'))){e.next=5;break}return e.next=4,fetch("http://18.222.159.99:80/api/v1/users/".concat(t.user_id,"/clock_events/").concat(t.id),a);case 4:this.props.loadEvents();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editEvent",value:function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(K.a,null,r.a.createElement(K.a.Body,null,r.a.createElement(V.a,{responsive:!0},r.a.createElement("tbody",null,this.props.events.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{className:"col-md-3"},X()(t.event_time).format("MM/DD/YYYY hh:mm:ss")),r.a.createElement("td",{className:"col-md-3"},t.type_evt),r.a.createElement("td",null,r.a.createElement("a",{className:"edit",href:"#",onClick:function(){return e.editEvent(t)}},r.a.createElement(H.a,{icon:"edit"}))),r.a.createElement("td",null,r.a.createElement("a",{className:"delete",href:"#",onClick:function(){return e.deleteEvent(t)}},r.a.createElement(H.a,{icon:"trash-alt"}))))})))))))}}]),t}(n.Component),$=a(52),ee=a(32),te=a.n(ee),ae=a(39),ne=a.n(ae),re=a(40),ce=a.n(re);var oe=function(e){var t=Object(n.useState)("clock_in"),a=Object($.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),u=Object($.a)(l,2),s=u[0],m=u[1],p=function(){var t=Object(b.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://18.222.159.99:80/api/v1/users/".concat(h(),"/clock_events/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i())},body:JSON.stringify({clock_event:{event_time:new Date,type_evt:c,user_id:h()}})});case 2:m(!1),o("0"),e.loadEvents();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(ne.a,{onClick:function(e){return m(!0)},variant:"dark",className:"float-right create_event_btn"},"New Clock Event"),r.a.createElement(te.a,{show:s||!1,onHide:function(e){return m(!1)}},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"New Clock Event")),r.a.createElement(te.a.Body,null,r.a.createElement(ce.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(ce.a.Label,null,"Event Type"),r.a.createElement(ce.a.Control,{as:"select",onChange:function(e){return o(e.target.value)}},r.a.createElement("option",{value:"clock_in"},"Clock In"),r.a.createElement("option",{value:"clock_out"},"Clock Out")))),r.a.createElement(te.a.Footer,null,r.a.createElement(ne.a,{variant:"secondary",onClick:function(e){return m(!1)}},"Close"),r.a.createElement("form",{onSubmit:p},r.a.createElement(ne.a,{variant:"dark",type:"submit"},"Create")))))},le=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(y.a)(this,Object(w.a)(t).call(this,e))).state={events:[]},a.loadEvents=a.loadEvents.bind(Object(G.a)(a)),a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"loadEvents",value:function(){var e=Object(b.a)(E.a.mark((function e(){var t,a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i(),a={method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(t)})},e.next=4,fetch("http://18.222.159.99:80/api/v1/users/".concat(h(),"/clock_events/"),a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({events:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadEvents()}},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(z.a,{xs:{span:8,offset:2},className:"events_list"},r.a.createElement("p",{className:"title"},"Events"),r.a.createElement(oe,{loadEvents:this.loadEvents}),r.a.createElement(Z,{loadEvents:this.loadEvents,events:this.state.events})))}}]),t}(n.Component);q.b.add(J.a,J.c,J.b);var ue=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",clock_state:"",events:[]},a.handleSignOut=function(){p(),a.props.history.push("/")},a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement("button",{onClick:this.handleSignOut,className:"float-right create_event_btn"},"Logout"),r.a.createElement(B.a,null,r.a.createElement("h1",null,localStorage.getItem("@user_name"))),r.a.createElement(B.a,null,r.a.createElement(le,null)))}}]),t}(n.Component),se=Object(u.g)(ue),ie=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return null!==localStorage.getItem("@auth-token")?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))},me=function(){return r.a.createElement(s.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:F}),r.a.createElement(u.b,{path:"/signup",component:N}),r.a.createElement(ie,{path:"/dashboard",component:se}),r.a.createElement(u.b,{path:"*",component:function(){return r.a.createElement("h1",null,"Page not found")}})))},pe=a(41);q.b.add(pe.a,pe.c,pe.b);var de=function(){return r.a.createElement(me,null)};o.a.render(r.a.createElement(de,null),document.getElementById("root"))},43:function(e,t,a){},85:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},91:function(e,t,a){e.exports=a(164)},96:function(e,t){}},[[91,1,2]]]);
//# sourceMappingURL=main.80a54c41.chunk.js.map